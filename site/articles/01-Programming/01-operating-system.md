# 操作系统

## 什么是线程与进程？

- 进程是 CPU 资源分配的最小单位，是能拥有资源和独立运行的最小单位
- 线程是 CPU 调度的最小单位，线程是建立在进程的基础上的一次程序运行单位，一个进程中可以有多个线程

* 进程
  * 资源分配最小单位
  * 有自己的独立地址空间，系统会建立数据表来维护代码段、堆栈段和数据段
  * 进程间的通信需要以通信的方式（IPC）进行
  * 多进程程序更健壮
  * 同步：无名管道、有名管道、信号、共享内存、消息队列、信号量
  * 僵尸进程：子进程退出时父进程没有获取其最新状态的子进程（ps 命令的 defunct 京城状态）
  * 孤儿进程：父进程运行结束时子进程还在运行时
* 线程
  * 程序执行的最小单位
  * 是共享中的数据，使用相同的地址空间（开销小）
  * 同一进程下的线程间共享全局变量、静态变量等数据
  * 多线程见需要处理好同步和互斥，否则一个线程死掉整个进程死掉
  * 同步：互斥量、读写锁、自旋锁、线程信号、条件变量

## 进程通信的具体方式有哪些？

- 管道通信
- 信号及信号量通信
- 共享内存
- socket

## 什么是 CPU 和 GPU？

* CPU：每个核心可以处理多个任务
* GPU：图形处理，每个单元只能处理有限的任务，可以工作在多个核心之间

## 线程和协程如何对比？

* 在计算机科学中还有一个概念叫做 Fiber，英文含义就是“纤维”，意指比 Thread 更细的线，也就是比线程(Thread)控制得更精密的并发处理机制。

## 并行和并发的机制和区别？

* 并行可以是并发，而并发不一定是并行。并行一般需要物理层面的支持。

## BSD UNIX 的进程通信机制？

> Socket的英文原义是“孔”或“插座”。作为BSD UNIX的[进程通信](https://baike.baidu.com/item/进程通信)机制，取后一种意思。通常也称作"[套接字](https://baike.baidu.com/item/套接字)"，用于描述IP地址和端口，是一个通信链的句柄，可以用来实现不同虚拟机或不同计算机之间的通信。在Internet上的[主机](https://baike.baidu.com/item/主机)一般运行了多个服务软件，同时提供几种服务。每种服务都打开一个Socket，并绑定到一个端口上，不同的端口对应于不同的服务。Socket正如其英文原义那样，像一个多孔插座。一台主机犹如布满各种插座的房间，每个插座有一个编号，有的插座提供220伏交流电， 有的提供110伏交流电，有的则提供有线电视节目。 客户软件将插头插到不同编号的插座，就可以得到不同的服务。—— [百度百科](https://baike.baidu.com/item/socket/281150)

* Socket API 原本是为网络通讯设计的，但后来在 socket 的框架上发展出一种 IPC （Inter-Process Communication）机制，就是 UNIX Domain Socket 也称为本地域。虽然网络 socket 也可用于同一台主机的进程间通讯（通过loopback地址127.0.0.1），但是 UNIX Domain Socket 用于 IPC 更有效率：**不需要经过网络协议栈，不需要打包拆包、计算校验和、维护序号和应答等，只是将应用层数据从一个进程拷贝到另一个进程**。这是因为，IPC 机制本质上是可靠的通讯，而网络协议是为不可靠的通讯设计的。UNIX Domain Socket 也提供面向流和面向数据包两种 API 接口，类似于 TCP 和 UDP，但是面向消息的 UNIX Domain Socket 也是可靠的，消息既不会丢失也不会顺序错乱。
* 

## 如何区分用户态和内核态？

